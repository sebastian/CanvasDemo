{"version":3,"sources":["app.js"],"names":["Box","x","y","sideLength","isBeingDragged","dragPreviousLocation","isInsideBox","bind","startDragging","render","updateLocation","stopDragging","location","diffX","diffY","ctx","fillStyle","colourByMode","beginPath","rect","closePath","fill","CanvasOrchestrator","mouseDown","mouseMove","mouseUp","setCanvasLocation","canvas","document","getElementById","onmousedown","onmousemove","onmouseup","getContext","window","onresize","draggedBoxes","boxes","windowWidth","innerWidth","windowHeight","innerHeight","canvasStartX","width","canvasStartY","height","e","translateToLocationInCanvas","clientX","clientY","eventLocationToCanvasLocation","forEach","box","push","clearRect"],"mappings":"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","file":"app.c328ef1a.js","sourceRoot":"..","sourcesContent":["class Box {\n  constructor (x, y, sideLength) {\n    this.x = x\n    this.y = y\n    this.sideLength = sideLength\n\n    this.isBeingDragged = false\n    this.dragPreviousLocation = null\n\n    this.isInsideBox = this.isInsideBox.bind(this)\n    this.startDragging = this.startDragging.bind(this)\n    this.render = this.render.bind(this)\n    this.updateLocation = this.updateLocation.bind(this)\n    this.stopDragging = this.stopDragging.bind(this)\n  }\n\n  isInsideBox (x, y) {\n    return (\n      this.x <= x &&\n      this.y <= y &&\n      this.x + this.sideLength >= x &&\n      this.y + this.sideLength >= y\n    )\n  }\n\n  startDragging (location) {\n    this.isBeingDragged = true\n    this.dragPreviousLocation = location\n  }\n\n  stopDragging () {\n    this.isBeingDragged = false\n  }\n\n  updateLocation (location) {\n    const diffX = location.x - this.dragPreviousLocation.x\n    const diffY = location.y - this.dragPreviousLocation.y\n    this.x += diffX\n    this.y += diffY\n    this.dragPreviousLocation = location\n  }\n\n  colourByMode () {\n    if (this.isBeingDragged) {\n      return '#DDD'\n    } else {\n      return '#000'\n    }\n  }\n\n  render (ctx) {\n    ctx.fillStyle = this.colourByMode()\n    ctx.beginPath()\n    ctx.rect(this.x, this.y, this.sideLength, this.sideLength)\n    ctx.closePath()\n    ctx.fill()\n  }\n}\n\nclass CanvasOrchestrator {\n  constructor () {\n    this.mouseDown = this.mouseDown.bind(this)\n    this.mouseMove = this.mouseMove.bind(this)\n    this.mouseUp = this.mouseUp.bind(this)\n    this.setCanvasLocation = this.setCanvasLocation.bind(this)\n    this.render = this.render.bind(this)\n\n    const canvas = document.getElementById('canvas')\n    canvas.onmousedown = this.mouseDown\n    canvas.onmousemove = this.mouseMove\n    canvas.onmouseup = this.mouseUp\n    this.canvas = canvas\n    this.ctx = canvas.getContext('2d')\n\n    // Capture window size so we can calculate where in the canvas we are.\n    this.setCanvasLocation()\n    window.onresize = this.setCanvasLocation\n\n    this.draggedBoxes = []\n    this.boxes = [\n      new Box(10, 30, 20),\n      new Box(50, 80, 20),\n      new Box(100, 80, 80),\n      new Box(200, 40, 50)\n    ]\n\n    this.render()\n  }\n\n  setCanvasLocation () {\n    const windowWidth = window.innerWidth\n    const windowHeight = window.innerHeight\n    this.canvasStartX = (windowWidth - this.canvas.width) / 2\n    this.canvasStartY = (windowHeight - this.canvas.height) / 2\n  }\n\n  translateToLocationInCanvas (x, y) {\n    return {\n      x: x - this.canvasStartX,\n      y: y - this.canvasStartY\n    }\n  }\n\n  eventLocationToCanvasLocation (e) {\n    return this.translateToLocationInCanvas(e.clientX, e.clientY)\n  }\n\n  mouseDown (e) {\n    const location = this.eventLocationToCanvasLocation(e)\n    this.boxes.forEach(box => {\n      if (box.isInsideBox(location.x, location.y)) {\n        box.startDragging(location)\n        this.draggedBoxes.push(box)\n      }\n    })\n    this.render()\n  }\n\n  mouseMove (e) {\n    const location = this.eventLocationToCanvasLocation(e)\n    this.draggedBoxes.forEach(box => box.updateLocation(location))\n    this.render()\n  }\n\n  mouseUp (e) {\n    this.draggedBoxes.forEach(box => box.stopDragging())\n    this.draggedBoxes = []\n    this.render()\n  }\n\n  render () {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n    this.boxes.forEach(box => {\n      box.render(this.ctx)\n    })\n  }\n}\n\nnew CanvasOrchestrator()\n"]}